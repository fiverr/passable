{"version":3,"file":"passable.js","sources":["../node_modules/n4s/dist/enforce.min.js","../node_modules/anyone/any/index.js","../src/lib/globalObject/index.js","../src/lib/singleton/constants.js","../src/lib/singleton/index.js","../src/core/Context/index.js","../src/constants.js","../src/core/test/lib/isTestFn/index.js","../src/core/test/lib/TestObject/index.js","../src/core/test/index.js","../src/core/passableResult/index.js","../src/core/Specific/index.js","../src/core/passable/index.js","../src/core/draft/constants.js","../src/core/draft/index.js","../src/utilities/validate/index.js","../src/index.js"],"sourcesContent":["!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(n=n||self).enforce=e()}(this,function(){\"use strict\";function n(e){return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&\"function\"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?\"symbol\":typeof n})(e)}function e(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function r(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(o,!0).forEach(function(t){e(n,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):t(o).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)&&\"function\"==typeof n[e]},u=Function(\"return this\")(),i=function(){return\"function\"==typeof u.Proxy};function a(n){return Boolean(Array.isArray(n))}function c(n){return Boolean(\"number\"==typeof n)}function f(n){return Boolean(\"string\"==typeof n)}function s(n,e){return e instanceof RegExp?e.test(n):\"string\"==typeof e&&new RegExp(e).test(n)}function l(e,t){return Array.isArray(t)&&[\"string\",\"number\",\"boolean\"].includes(n(e))?t.includes(e):\"string\"==typeof t&&\"string\"==typeof e&&t.includes(e)}function y(n,e){return n===e}function p(n){var e=!isNaN(parseFloat(n))&&!isNaN(Number(n))&&isFinite(n);return Boolean(e)}function g(n,e){return p(n)&&p(e)&&Number(n)===Number(e)}function b(e){return!e||(p(e)?0===e:Object.prototype.hasOwnProperty.call(e,\"length\")?0===e.length:\"object\"!==n(e)||0===Object.keys(e).length)}function m(n,e){return p(n)&&p(e)&&Number(n)>Number(e)}function v(n,e){return p(n)&&p(e)&&Number(n)>=Number(e)}function h(n,e){return p(n)&&p(e)&&Number(n)<Number(e)}function O(n,e){return p(n)&&p(e)&&Number(n)<=Number(e)}function N(n,e){return n.length===e}a.negativeForm=\"isNotArray\",c.negativeForm=\"isNotNumber\",f.negativeForm=\"isNotString\",s.negativeForm=\"notMatches\",l.negativeForm=\"notInside\",y.negativeForm=\"notEquals\",p.negativeForm=\"isNotNumeric\",g.negativeForm=\"numberNotEquals\",b.negativeForm=\"isNotEmpty\",m.alias=\"gt\",v.alias=\"gte\",h.alias=\"lt\",O.alias=\"lte\",N.negativeForm=\"lengthNotEquals\";var d=function(n){var e=function(e){var t=n[e].negativeForm,r=n[e].alias;t&&(n[t]=function(){return!n[e].apply(n,arguments)}),r&&(n[r]=n[e])};for(var t in n)e(t);return n}({isArray:a,isNumber:c,isString:f,matches:s,inside:l,equals:y,numberEquals:g,isNumeric:p,isEmpty:b,greaterThan:m,greaterThanOrEquals:v,lessThan:h,lessThanOrEquals:O,longerThan:function(n,e){return n.length>e},longerThanOrEquals:function(n,e){return n.length>=e},shorterThan:function(n,e){return n.length<e},shorterThanOrEquals:function(n,e){return n.length<=e},lengthEquals:N,isOdd:function(n){return!!p(n)&&n%2!=0},isEven:function(n){return!!p(n)&&n%2==0}});function E(e,t){if(\"function\"==typeof e){for(var r=arguments.length,o=new Array(r>2?r-2:0),u=2;u<r;u++)o[u-2]=arguments[u];if(!0!==e.apply(void 0,[t].concat(o)))throw new Error(\"[Enforce]: invalid \".concat(n(t),\" value\"))}}function j(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},d,{},n);if(i())return function(n){var e=new Proxy(t,{get:function(t,r){if(o(t,r))return function(){for(var o=arguments.length,u=new Array(o),i=0;i<o;i++)u[i]=arguments[i];return E.apply(void 0,[t[r],n].concat(u)),e}}});return e};var u=Object.keys(t);return function(n){return u.reduce(function(u,i){return Object.assign(u,r({},o(t,i)&&e({},i,function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return E.apply(void 0,[t[i],n].concat(r)),u})))},{})}}var w=new j;return w.Enforce=j,w});\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = global || self, global.any = factory());\n}(this, function () { 'use strict';\n\n    /**\n     * Accepts a value or a function, and coerces it into a boolean value\n     * @param {*|Function} [arg] Any expression or value\n     * @return {Boolean}\n     */\n    var run = function run(arg) {\n      if (typeof arg === 'function') {\n        try {\n          var output = arg();\n          return output != false && Boolean(output);\n        } catch (err) {\n          return false;\n        }\n      }\n\n      return arg != false && Boolean(arg);\n    };\n\n    /**\n     * Checks that at least one passed argument evaluates to a truthy value.\n     * @param  {[]*} [args] Any amount of values or expressions.\n     * @returns {Boolean}\n     */\n\n    var any = function any() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return args.some(run);\n    };\n\n    return any;\n\n}));\n","/**\n * @type {Object} Reference to global object.\n */\nconst globalObject = Function('return this')();\n\nexport default globalObject;\n","/**\n * @type {String} Passable's major version.\n */\nconst PASSABLE_MAJOR = PASSABLE_VERSION.split('.')[0];\n\n/**\n * @type {Symbol} Used to store a global instance of Passable.\n */\nexport const SYMBOL_PASSABLE = Symbol.for(`PASSABLE#${PASSABLE_MAJOR}`);\n","import go from '../globalObject';\nimport { SYMBOL_PASSABLE } from './constants';\n\n/**\n * @param  {String[]} versions List of passable versions.\n * @throws {Error}\n */\nconst throwMultiplePassableError = (...versions) => {\n    throw new Error(`[Passable]: Two versions of Passable detected: (${versions.join()}).\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version.`);\n};\n\n/**\n * Registers current Passable instance on global object.\n * @param {Function} passable Reference to passable.\n * @return {Function} Global passable reference.\n */\nexport const register = (passable, Context) => {\n\n    const existing = go[SYMBOL_PASSABLE];\n\n    if (existing) {\n        if (existing.VERSION !== passable.VERSION) {\n            setTimeout(() => throwMultiplePassableError(passable.VERSION, existing.VERSION));\n        }\n    } else {\n        go[SYMBOL_PASSABLE] = passable;\n        go[SYMBOL_PASSABLE].Context = Context;\n    }\n\n    return go[SYMBOL_PASSABLE];\n};\n\nconst singletonExport = {\n    use: () => go[SYMBOL_PASSABLE],\n    register\n};\n\nexport default singletonExport;\n","import singleton from '../../lib/singleton';\n\n/**\n * Creates a new context object, and assigns it as a static property on the constructor function for outside reference.\n * @param {Object} parent   Parent context.\n */\nconst Context = function(parent) {\n    singleton.use().Context.ctx = this;\n    Object.assign(this, parent);\n};\n\n/**\n * Clears stored instance from constructor function.\n */\nContext.clear = function() {\n    singleton.use().Context.ctx = null;\n};\n\nexport default Context;\n","/**\n * @type {String} Version number derived from current tag.\n */\nexport const VERSION = PASSABLE_VERSION;\n\n/**\n * @type {String} Keyword used for marking non failing tests.\n */\nexport const WARN = 'warn';\n\n/**\n * @type {String} Keyword used for marking failing tests.\n */\nexport const FAIL = 'fail';\n","/**\n * Checks that a given argument qualifies as a test function\n * @param {*} testFn\n * @return {Boolean}\n */\nconst isTestFn = (testFn) => {\n    if (!testFn) {\n        return false;\n    }\n\n    return typeof testFn.then === 'function' || typeof testFn === 'function';\n};\n\nexport default isTestFn;\n","/**\n * Describes a test call inside a passable suite.\n * @param {Object} ctx                  Parent context.\n * @param {String} fieldName            Name of the field being tested.\n * @param {String} statement            The message returned when failing.\n * @param {Promise|Function} testFn     The actual test callbrack or promise.\n * @param {String} [severity]           Indicates whether the test should fail or warn.\n */\nfunction TestObject(ctx, fieldName, statement, testFn, severity) {\n    Object.assign(this, {\n        ctx,\n        testFn,\n        fieldName,\n        statement,\n        severity,\n        failed: false\n    });\n};\n\n/**\n * @returns Current validity status of a test.\n */\nTestObject.prototype.valueOf = function() {\n    return this.failed !== true;\n};\n\n/**\n * Sets a field to failed.\n * @returns {TestObject} Current instance.\n */\nTestObject.prototype.fail = function() {\n\n    this.ctx.result.fail(\n        this.fieldName,\n        this.statement,\n        this.severity\n    );\n\n    this.failed = true;\n    return this;\n};\n\n/**\n * Adds current test to pending list.\n */\nTestObject.prototype.setPending = function() {\n    this.ctx.pending.push(this);\n};\n\n/**\n * Removes test from pending list.\n */\nTestObject.prototype.clearPending = function() {\n    this.ctx.pending = this.ctx.pending.filter((t) => t !== this);\n};\n\nexport default TestObject;\n","import { FAIL } from '../../constants';\nimport singleton from '../../lib/singleton';\nimport { isTestFn, TestObject } from './lib';\n\n/**\n * Run async test.\n * @param {TestObject} testObject A TestObject instance.\n */\nexport const runAsync = (testObject) => {\n    const { fieldName, testFn, statement, ctx } = testObject;\n\n    ctx.result.markAsync(fieldName);\n\n    const done = () => {\n        testObject.clearPending();\n\n        if (!hasRemainingPendingTests(ctx, fieldName)) {\n            ctx.result.markAsDone(fieldName);\n        }\n\n        if (!hasRemainingPendingTests(ctx)) {\n            ctx.result.markAsDone();\n        }\n    };\n\n    const fail = (rejectionMessage) => {\n        testObject.statement = typeof rejectionMessage === 'string'\n            ? rejectionMessage\n            : statement;\n\n        if (ctx.pending.includes(testObject)) {\n            testObject.fail();\n        }\n\n        done();\n    };\n\n    try {\n        testFn.then(done, fail);\n    } catch (e) {\n        fail();\n    }\n};\n\n/**\n * Checks if there still are remaining pending tests for given criteria\n * @param {Object} ctx          Parent context\n * @param {String} [fieldName]  Name of the field to test against\n * @return {Boolean}\n */\nconst hasRemainingPendingTests = (ctx, fieldName) => {\n    if (!ctx.pending.length) {\n        return false;\n    }\n\n    if (fieldName) {\n        return ctx.pending.some((testObject) => testObject.fieldName === fieldName);\n    }\n\n    return !!ctx.pending.length;\n};\n\n/**\n * Performs \"shallow\" run over test functions, assuming sync tests only.\n * @param {TestObject} testObject TestObject instance.\n * @return {*} Result from test function\n */\nconst preRun = (testObject) => {\n    let result;\n    try {\n        result = testObject.testFn();\n    } catch (e) {\n        result = false;\n    }\n\n    if (result === false) {\n        testObject.fail();\n    }\n\n    return result;\n};\n\n/**\n * Registers test, if async - adds to pending array\n * @param {TestObject} testObject   A TestObject Instance.\n */\nconst register = (testObject) => {\n    const { testFn, ctx, fieldName } = testObject;\n    let pending = false;\n    let result;\n\n    if (ctx.specific.excludes(fieldName)) {\n        ctx.result.addToSkipped(fieldName);\n        return;\n    }\n\n    ctx.result.initFieldCounters(fieldName);\n    ctx.result.bumpTestCounter(fieldName);\n\n    if (testFn && typeof testFn.then === 'function') {\n        pending = true;\n    } else {\n        result = preRun(testObject);\n    }\n\n    if (result && typeof result.then === 'function') {\n        pending = true;\n\n        testObject.testFn = result;\n    }\n\n    if (pending) {\n        testObject.setPending();\n    }\n};\n\n/**\n * Test function used by consumer to provide their own validations.\n * @param {String} fieldName            Name of the field to test.\n * @param {String} [statement]          The message returned in case of a failure.\n * @param {function | Promise} testFn   The actual test callback or promise.\n * @param {String} [severity]           Indicates whether the test should fail or warn.\n * @return {TestObject}                 A TestObject instance.\n */\nconst test = (fieldName, ...args) => {\n    let statement,\n        testFn,\n        severity;\n\n    if (typeof args[0] === 'string') {\n        [statement, testFn, severity] = args;\n    } else if (isTestFn(args[0])) {\n        [testFn, severity] = args;\n    }\n\n    if (!isTestFn(testFn)) {\n        return;\n    }\n\n    const testObject = new TestObject(\n        singleton.use().Context.ctx,\n        fieldName,\n        statement,\n        testFn,\n        severity || FAIL\n    );\n\n    register(testObject);\n\n    return testObject;\n};\n\nexport default test;\n","import { WARN, FAIL } from '../../constants';\nconst severities = [ WARN, FAIL ];\n\nconst passableResult = (name) => {\n\n    const completionCallbacks = [];\n    let asyncObject = null;\n    let hasValidationErrors = false;\n    let hasValidationWarnings = false;\n    let cancelled = false;\n\n    /**\n     * Initializes specific field's counters\n     * @param {string} fieldName - The name of the field.\n     */\n    const initFieldCounters = (fieldName) => {\n        if (output.testsPerformed[fieldName]) { return output; }\n\n        output.testsPerformed[fieldName] = {\n            testCount: 0,\n            failCount: 0,\n            warnCount: 0\n        };\n    };\n\n    /**\n     * Bumps test counters to indicate tests that's being performed\n     * @param {string} fieldName - The name of the field.\n     */\n    const bumpTestCounter = (fieldName) => {\n        if (!output.testsPerformed[fieldName]) { return output; }\n\n        output.testsPerformed[fieldName].testCount++;\n        output.testCount++;\n    };\n\n    /**\n     * Bumps field's warning counts and adds warning string\n     * @param {string} fieldName - The name of the field.\n     * @param {string} statement - The error string to add to the object.\n     */\n    const bumpTestWarning = (fieldName, statement) => {\n        hasValidationWarnings = true;\n        output.warnings[fieldName] = output.warnings[fieldName] || [];\n        output.warnings[fieldName].push(statement);\n        output.warnCount++;\n        output.testsPerformed[fieldName].warnCount++;\n    };\n\n    /**\n     * Bumps field's error counts and adds error string\n     * @param {string} fieldName - The name of the field.\n     * @param {string} statement - The error string to add to the object.\n     */\n    const bumpTestError = (fieldName, statement) => {\n        hasValidationErrors = true;\n        output.errors[fieldName] = output.errors[fieldName] || [];\n        output.errors[fieldName].push(statement);\n        output.failCount++;\n        output.testsPerformed[fieldName].failCount++;\n    };\n\n    /**\n     * Fails a field and updates output accordingly\n     * @param {string} fieldName - The name of the field.\n     * @param {string} statement - The error string to add to the object.\n     * @param {string} severity - Whether it is a `fail` or `warn` test.\n     */\n    const fail = (fieldName, statement, severity) => {\n        if (!output.testsPerformed[fieldName]) { return output; }\n        const selectedSeverity = severity && severities.includes(severity) ? severity : FAIL;\n        selectedSeverity === WARN\n            ? bumpTestWarning(fieldName, statement)\n            : bumpTestError(fieldName, statement);\n    };\n\n    /**\n     * Uniquely add a field to the `skipped` list\n     * @param {string} fieldName - The name of the field.\n     */\n    const addToSkipped = (fieldName) => {\n        !output.skipped.includes(fieldName) && output.skipped.push(fieldName);\n    };\n\n    /**\n     * Runs completion callbacks aggregated by `done`\n     * regardless of success or failure\n     */\n    const runCompletionCallbacks = () => {\n        completionCallbacks.forEach((cb) => !cancelled && cb(output));\n    };\n\n    /**\n     * Marks a field as async\n     * @param {string} fieldName - The name of the field.\n    */\n    const markAsync = (fieldName) => {\n        asyncObject = asyncObject || {};\n        asyncObject[fieldName] = asyncObject[fieldName] || {};\n        asyncObject[fieldName] = {\n            done: false,\n            callbacks: asyncObject[fieldName].callbacks || []\n        };\n    };\n\n    /**\n     * Marks an async field as done\n     * @param {string} fieldName - The name of the field.\n    */\n    const markAsDone = (fieldName) => {\n        if (!fieldName) {\n            return runCompletionCallbacks();\n        }\n\n        if (asyncObject !== null && asyncObject[fieldName]) {\n            asyncObject[fieldName].done = true;\n\n            // run field callbacks set in `after`\n            if (asyncObject[fieldName].callbacks) {\n                asyncObject[fieldName].callbacks.forEach((callback) => !cancelled && callback(output));\n            }\n        }\n    };\n\n    /**\n     * Registers callback functions to be run when test suite is done running\n     * If current suite is not async, runs the callback immediately\n     * @param {function} callback the function to be called on done\n     * @return {object} output object\n     */\n    const done = (callback) => {\n        if (typeof callback !== 'function') {return output;}\n        if (!asyncObject) {\n            callback(output);\n        }\n\n        completionCallbacks.push(callback);\n\n        return output;\n    };\n\n    /**\n     * Registers callback functions to be run when a certain field is done running\n     * If field is not async, runs the callback immediately\n     * @param {string} fieldName - The name of the field.\n     * @param {function} callback the function to be called on done\n     * @return {object} output object\n     */\n    const after = (fieldName, callback) => {\n        if (typeof callback !== 'function') {\n            return output;\n        }\n\n        asyncObject = asyncObject || {};\n        if (!asyncObject[fieldName] && output.testsPerformed[fieldName]) {\n            callback(output);\n        } else if (asyncObject[fieldName]) {\n            asyncObject[fieldName].callbacks = [...(asyncObject[fieldName].callbacks || []), callback];\n        }\n\n        return output;\n    };\n\n    /**\n     * cancels done/after callbacks. They won't invoke when async operations complete\n     */\n    const cancel = () => {\n        cancelled = true;\n\n        return output;\n    };\n\n    /**\n     * Gets all the errors of a field, or of the whole object\n     * @param {string} fieldName - The name of the field.\n     * @return {array | object} The field's errors, or all errors\n     */\n    const getErrors = (fieldName) => {\n        if (!fieldName) {\n            return output.errors;\n        }\n\n        if (output.errors[fieldName]) {\n            return output.errors[fieldName];\n        }\n\n        return [];\n    };\n\n    /**\n     * Gets all the warnings of a field, or of the whole object\n     * @param {string} [fieldName] - The name of the field.\n     * @return {array | object} The field's warnings, or all warnings\n     */\n    const getWarnings = (fieldName) => {\n        if (!fieldName) {\n            return output.warnings;\n        }\n\n        if (output.warnings[fieldName]) {\n            return output.warnings[fieldName];\n        }\n\n        return [];\n    };\n\n    /**\n     * Checks if a certain field (or the whole suite) has errors\n     * @param {string} [fieldName]\n     * @return {boolean}\n     */\n    const hasErrors = (fieldName) => {\n        if (!fieldName) {\n            return hasValidationErrors;\n        }\n\n        return Boolean(output.getErrors(fieldName).length);\n    };\n\n    /**\n     * Checks if a certain field (or the whole suite) has warnings\n     * @param {string} [fieldName] - The name of the field.\n     * @return {boolean}\n     */\n    const hasWarnings = (fieldName) => {\n        if (!fieldName) {\n            return hasValidationWarnings;\n        }\n\n        return Boolean(output.getWarnings(fieldName).length);\n    };\n\n    const output = {\n        name,\n        failCount: 0,\n        warnCount: 0,\n        testCount: 0,\n        testsPerformed: {},\n        errors: {},\n        warnings: {},\n        skipped: []\n    };\n\n    Object.defineProperties(output, {\n        hasErrors: {\n            value: hasErrors,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        hasWarnings: {\n            value: hasWarnings,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        getErrors: {\n            value: getErrors,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        getWarnings: {\n            value: getWarnings,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        done: {\n            value: done,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        after: {\n            value: after,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        },\n        cancel: {\n            value: cancel,\n            writable: true,\n            configurable: true,\n            enumerable: false\n        }\n    });\n\n    return {\n        initFieldCounters,\n        bumpTestError,\n        bumpTestWarning,\n        bumpTestCounter,\n        fail,\n        addToSkipped,\n        runCompletionCallbacks,\n        markAsync,\n        markAsDone,\n        output\n    };\n};\n\nexport default passableResult;\n","/** Class representing validation inclusion and exclusion groups */\nclass Specific {\n\n    /**\n     * Initialize Specific object\n     *\n     * @param {String | Array | Object | undefined} specific\n     */\n    constructor(specific) {\n\n        if (!specific) { return; }\n\n        if (!Specific.is(specific)) {\n            throw new TypeError();\n        }\n\n        if (typeof specific === 'string' || Array.isArray(specific)) {\n            if (specific.length === 0) { return; }\n            this.only = this.populateGroup(this.only, specific);\n            return;\n        }\n\n        if (specific.only) {\n            this.only = this.populateGroup(this.only, specific.only);\n        }\n\n        if (specific.not) {\n            this.not = this.populateGroup(this.not, specific.not);\n        }\n    }\n\n    /**\n     * Populate inclusion and exclusion groups\n     *\n     * @param {Object} group - the group to populate.\n     * @param {String | Array} field - the field to add to the group\n     * @return {Object} modified group\n     */\n    populateGroup(group, field) {\n        group = group || {};\n\n        if (typeof field === 'string') {\n            group[field] = true;\n        } else if (Array.isArray(field)) {\n            field.forEach((item) => group[item] = true);\n        }\n\n        return group;\n    }\n\n    /**\n     * Checkes whether a given field name is in exclusion group\n     * or not a member of inclusion group (when present)\n     *\n     * @param {String} fieldName\n     * @return {Boolean}\n     */\n    excludes(fieldName) {\n        if (this.only && !this.only[fieldName]) {\n            return true;\n        }\n\n        if (this.not && this.not[fieldName]) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Test whether a given argument matches\n     * the `specific` filter convention\n     *\n     * @param {Any} item\n     * @return {boolean}\n     */\n    static is(item) {\n        if (Array.isArray(item)) {\n            return item.every((item) => typeof item === 'string');\n        }\n\n        if (typeof item === 'string') { return true; }\n\n        if (item !== null && typeof item === 'object' && (\n            item.hasOwnProperty('only')\n            || item.hasOwnProperty('not')\n        )) {\n            return true;\n        }\n\n        return false;\n    }\n}\n\nexport default Specific;","import Context from '../Context';\nimport test, { runAsync } from '../test';\nimport passableResult from '../passableResult';\nimport Specific from '../Specific';\n\nconst initError = (name, value, doc) => `[Passable]: failed during suite initialization. Unexpected '${typeof value}' for '${name}' argument.\n    See: ${doc ? doc : 'https://fiverr.github.io/passable/getting_started/writing_tests.html'}`;\n\nconst passable = (name, tests, specific) => {\n\n    if (typeof name !== 'string') {\n        throw new TypeError(initError('suite name', name));\n    }\n\n    if (typeof tests !== 'function') {\n        throw new TypeError(initError('tests', tests));\n    }\n\n    if (specific && !Specific.is(specific)) {\n        throw new TypeError(initError('specific', tests, 'https://fiverr.github.io/passable/test/specific.html'));\n    }\n\n    const result = passableResult(name);\n\n    const pending = [];\n\n    new Context({\n        specific: new Specific(specific),\n        result,\n        pending\n    });\n\n    tests(test, result.output);\n\n    Context.clear();\n\n    [...pending].forEach(runAsync);\n\n    return result.output;\n};\n\nexport default passable;\n","/**\n * @type {String} Error thrown when draft gets called without an active Passable context.\n */\nexport const ERROR_NO_CONTEXT = '[Passable]: Draft was called outside of the context of a running suite. Please make sure you call it only from your Passable suite.';\n","import singleton from '../../lib/singleton';\nimport { ERROR_NO_CONTEXT } from './constants';\n\n/**\n * @return {Object} Current draft.\n */\nconst draft = () => {\n\n    const ctx = singleton.use().Context.ctx;\n\n    if (ctx) {\n        return ctx.result.output;\n    }\n\n    setTimeout(() => {\n        throw new Error(ERROR_NO_CONTEXT);\n    });\n};\n\nexport default draft;\n","/**\n * Run tests and catch errors\n *\n * @param {function} callback The test content\n * @return {boolean}\n */\nfunction validate(test) {\n\n    if (typeof test !== 'function' && !(test instanceof Promise)) {\n        throw new TypeError(`[Validate]: expected ${typeof test} to be a function.`);\n    }\n\n    try {\n        return test() !== false;\n    } catch (_) {\n        return false;\n    }\n}\n\nexport default validate;\n","import enforce from 'n4s/dist/enforce.min';\nimport any from 'anyone/any';\nimport passable from './core/passable';\nimport Context from './core/Context';\nimport draft from './core/draft';\nimport test from './core/test';\nimport validate from './utilities/validate';\nimport singleton from './lib/singleton';\nimport { WARN, FAIL, VERSION } from './constants';\n\npassable.VERSION = VERSION;\npassable.enforce = enforce;\npassable.draft = draft;\npassable.Enforce = enforce.Enforce;\npassable.test = test;\npassable.validate = validate;\npassable.any = any;\npassable.WARN = WARN;\npassable.FAIL = FAIL;\n\nsingleton.register(passable, Context);\n\nexport default passable;\n"],"names":["n","e","module","this","Symbol","iterator","constructor","prototype","t","Object","defineProperty","value","enumerable","configurable","writable","keys","getOwnPropertySymbols","r","filter","getOwnPropertyDescriptor","push","apply","arguments","length","o","forEach","getOwnPropertyDescriptors","defineProperties","hasOwnProperty","call","u","Function","i","Proxy","a","Boolean","Array","isArray","c","f","s","RegExp","test","l","includes","y","p","isNaN","parseFloat","Number","isFinite","g","b","m","v","h","O","N","negativeForm","alias","d","isNumber","isString","matches","inside","equals","numberEquals","isNumeric","isEmpty","greaterThan","greaterThanOrEquals","lessThan","lessThanOrEquals","longerThan","longerThanOrEquals","shorterThan","shorterThanOrEquals","lengthEquals","isOdd","isEven","E","concat","Error","j","get","reduce","w","Enforce","global","factory","run","arg","output","err","any","_len","args","_key","some","globalObject","PASSABLE_MAJOR","PASSABLE_VERSION","split","SYMBOL_PASSABLE","throwMultiplePassableError","versions","join","register","passable","Context","existing","go","VERSION","setTimeout","singletonExport","use","parent","singleton","ctx","clear","WARN","FAIL","isTestFn","testFn","then","TestObject","fieldName","statement","severity","failed","valueOf","fail","result","setPending","pending","clearPending","runAsync","testObject","markAsync","done","hasRemainingPendingTests","markAsDone","rejectionMessage","preRun","specific","excludes","addToSkipped","initFieldCounters","bumpTestCounter","severities","passableResult","name","completionCallbacks","asyncObject","hasValidationErrors","hasValidationWarnings","cancelled","testsPerformed","testCount","failCount","warnCount","bumpTestWarning","warnings","bumpTestError","errors","selectedSeverity","skipped","runCompletionCallbacks","cb","callbacks","callback","after","cancel","getErrors","getWarnings","hasErrors","hasWarnings","Specific","is","TypeError","only","populateGroup","not","group","field","item","every","initError","doc","tests","ERROR_NO_CONTEXT","draft","validate","Promise","_","enforce"],"mappings":"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"}
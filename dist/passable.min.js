!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).passable=n()}(this,(function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(){return(e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function i(t,n){return t(n={exports:{}},n.exports),n.exports}var u=i((function(n,r){n.exports=function(){function n(e){return(n="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(n){return t(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":t(n)})(e)}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function i(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(e,!0).forEach((function(n){r(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var u=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)&&"function"==typeof t[n]},a=Function("return this")(),s=function(){return"function"==typeof a.Proxy};function f(t){return Boolean(Array.isArray(t))}function c(t){return Boolean("number"==typeof t)}function l(t){return Boolean("string"==typeof t)}function p(t,n){return n instanceof RegExp?n.test(t):"string"==typeof n&&new RegExp(n).test(t)}function y(t,e){return(Array.isArray(e)&&["string","number","boolean"].includes(n(t))||"string"==typeof e&&"string"==typeof t)&&e.includes(t)}function h(t,n){return t===n}function b(t){var n=!isNaN(parseFloat(t))&&!isNaN(Number(t))&&isFinite(t);return Boolean(n)}function g(t,n){return b(t)&&b(n)&&Number(t)===Number(n)}function m(t){return!t||(b(t)?0===t:Object.prototype.hasOwnProperty.call(t,"length")?0===t.length:"object"!==n(t)||0===Object.keys(t).length)}function d(t,n){return b(t)&&b(n)&&Number(t)>Number(n)}function v(t,n){return b(t)&&b(n)&&Number(t)>=Number(n)}function w(t,n){return b(t)&&b(n)&&Number(t)<Number(n)}function E(t,n){return b(t)&&b(n)&&Number(t)<=Number(n)}function O(t,n){return t.length===n}f.negativeForm="isNotArray",c.negativeForm="isNotNumber",l.negativeForm="isNotString",p.negativeForm="notMatches",y.negativeForm="notInside",h.negativeForm="notEquals",b.negativeForm="isNotNumeric",g.negativeForm="numberNotEquals",m.negativeForm="isNotEmpty",d.alias="gt",v.alias="gte",w.alias="lt",E.alias="lte",O.negativeForm="lengthNotEquals";var P=function(t){var n=function(n){var e=t[n].negativeForm,r=t[n].alias;e&&(t[e]=function(){return!t[n].apply(t,arguments)}),r&&(t[r]=t[n])};for(var e in t)n(e);return t}({isArray:f,isNumber:c,isString:l,matches:p,inside:y,equals:h,numberEquals:g,isNumeric:b,isEmpty:m,greaterThan:d,greaterThanOrEquals:v,lessThan:w,lessThanOrEquals:E,longerThan:function(t,n){return t.length>n},longerThanOrEquals:function(t,n){return t.length>=n},shorterThan:function(t,n){return t.length<n},shorterThanOrEquals:function(t,n){return t.length<=n},lengthEquals:O,isOdd:function(t){return!!b(t)&&t%2!=0},isEven:function(t){return!!b(t)&&t%2==0}});function N(t,e){if("function"==typeof t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(!0!==t.apply(void 0,[e].concat(o)))throw new Error("[Enforce]: invalid ".concat(n(e)," value"))}}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i({},P,{},t);if(s())return function(t){var e=new Proxy(n,{get:function(n,r){if(u(n,r))return function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return N.apply(void 0,[n[r],t].concat(i)),e}}});return e};var o=Object.keys(n);return function(t){return o.reduce((function(o,a){return e(o,i({},u(n,a)&&r({},a,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return N.apply(void 0,[n[a],t].concat(r)),o}))))}),{})}}var S=new A;return S.Enforce=A,S}()})),a=i((function(t,n){var e;t.exports=(e=function(t){if("function"==typeof t)try{var n=t();return 0!=n&&Boolean(n)}catch(t){return!1}return 0!=t&&Boolean(t)},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some(e)})})),s=Function("return this")(),f="7.5.1".split(".")[0],c=Symbol.for("PASSABLE#".concat(f)),l=function(){return s[c]},p=function(t){var n=s[c];return n?n.VERSION!==t.VERSION&&setTimeout((function(){return function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];throw new Error("[Passable]: Multiple versions of Passable detected: (".concat(n.join(),").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version."))}(t.VERSION,n.VERSION)})):s[c]=t,s[c]},y=function(t){l().ctx=this,e(this,t)};y.clear=function(){l().ctx=null};var h=function(t){return!!t&&("function"==typeof t.then||"function"==typeof t)};function b(t,n,r,o,i){e(this,{ctx:t,testFn:o,fieldName:n,statement:r,severity:i,failed:!1})}b.prototype.valueOf=function(){return!0!==this.failed},b.prototype.fail=function(){return this.ctx.result.fail(this.fieldName,this.statement,this.severity),this.failed=!0,this},b.prototype.setPending=function(){this.ctx.pending.push(this)},b.prototype.clearPending=function(){var t=this;this.ctx.pending=this.ctx.pending.filter((function(n){return n!==t}))};var g=function(t){var n=t.fieldName,e=t.testFn,r=t.statement,o=t.ctx;o.result.markAsync(n);var i=function(){t.clearPending(),m(o,n)||o.result.markAsDone(n),m(o)||o.result.markAsDone()},u=function(n){t.statement="string"==typeof n?n:r,o.pending.includes(t)&&t.fail(),i()};try{e.then(i,u)}catch(t){u()}},m=function(t,n){return!!t.pending.length&&(n?t.pending.some((function(t){return t.fieldName===n})):!!t.pending.length)},d=function(t){var n,e=t.testFn,r=t.ctx,o=t.fieldName,i=!1;r.specific.excludes(o)?r.result.addToSkipped(o):(r.result.initFieldCounters(o),r.result.bumpTestCounter(o),e&&"function"==typeof e.then?i=!0:n=function(t){var n;try{n=t.testFn()}catch(t){n=!1}return!1===n&&t.fail(),n}(t),n&&"function"==typeof n.then&&(i=!0,t.testFn=n),i&&t.setPending())},v=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i,u,a;if(h(r[0])?(u=r[0],a=r[1]):["string","object"].some((function(n){return t(r[0])===n}))&&(i=r[0],u=r[1],a=r[2]),h(u)){var s=new b(l().ctx,n,i,u,a||"fail");return d(s),s}},w=["warn","fail"],E=function(){function e(t){if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t){if(!e.is(t))throw new TypeError;if("string"==typeof t||Array.isArray(t)){if(0===t.length)return;this.only=this.populateGroup(this.only,t)}else t.only&&(this.only=this.populateGroup(this.only,t.only)),t.not&&(this.not=this.populateGroup(this.not,t.not))}}var r,o,i;return r=e,i=[{key:"is",value:function(n){return Array.isArray(n)?n.every((function(t){return"string"==typeof t})):"string"==typeof n||!(null===n||"object"!==t(n)||!n.hasOwnProperty("only")&&!n.hasOwnProperty("not"))}}],(o=[{key:"populateGroup",value:function(t,n){return t=t||{},"string"==typeof n?t[n]=!0:Array.isArray(n)&&n.forEach((function(n){return t[n]=!0})),t}},{key:"excludes",value:function(t){return!(!this.only||this.only[t])||!(!this.not||!this.not[t])}}])&&n(r.prototype,o),i&&n(r,i),e}(),O=function(n,e,r){return"[Passable]: failed during suite initialization. Unexpected '".concat(t(e),"' for '").concat(n,"' argument.\n    See: ").concat(r||"https://fiverr.github.io/passable/getting_started/writing_tests.html")},P=function(t,n,e){if("string"!=typeof t)throw new TypeError(O("suite name",t));if("function"!=typeof n)throw new TypeError(O("tests",n));if(e&&!E.is(e))throw new TypeError(O("specific",n,"https://fiverr.github.io/passable/test/specific.html"));var o=function(t){var n=[],e=null,o=!1,i=!1,u=!1,a=function(t,n){i=!0,c.warnings[t]=c.warnings[t]||[],c.warnings[t].push(n),c.warnCount++,c.testsPerformed[t].warnCount++},s=function(t,n){o=!0,c.errors[t]=c.errors[t]||[],c.errors[t].push(n),c.failCount++,c.testsPerformed[t].failCount++},f=function(){n.forEach((function(t){return!u&&t(c)}))},c={name:t,failCount:0,warnCount:0,testCount:0,testsPerformed:{},errors:{},warnings:{},skipped:[]};return Object.defineProperties(c,{hasErrors:{value:function(t){return t?Boolean(c.getErrors(t).length):o},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(t){return t?Boolean(c.getWarnings(t).length):i},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(t){return t?c.errors[t]?c.errors[t]:[]:c.errors},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(t){return t?c.warnings[t]?c.warnings[t]:[]:c.warnings},writable:!0,configurable:!0,enumerable:!1},done:{value:function(t){return"function"!=typeof t||(e||t(c),n.push(t)),c},writable:!0,configurable:!0,enumerable:!1},after:{value:function(t,n){return"function"!=typeof n||(!(e=e||{})[t]&&c.testsPerformed[t]?n(c):e[t]&&(e[t].callbacks=[].concat(r(e[t].callbacks||[]),[n]))),c},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){return u=!0,c},writable:!0,configurable:!0,enumerable:!1}}),{initFieldCounters:function(t){if(c.testsPerformed[t])return c;c.testsPerformed[t]={testCount:0,failCount:0,warnCount:0}},bumpTestError:s,bumpTestWarning:a,bumpTestCounter:function(t){if(!c.testsPerformed[t])return c;c.testsPerformed[t].testCount++,c.testCount++},fail:function(t,n,e){if(!c.testsPerformed[t])return c;"warn"===(e&&w.includes(e)?e:"fail")?a(t,n):s(t,n)},addToSkipped:function(t){!c.skipped.includes(t)&&c.skipped.push(t)},runCompletionCallbacks:f,markAsync:function(t){(e=e||{})[t]=e[t]||{},e[t]={done:!1,callbacks:e[t].callbacks||[]}},markAsDone:function(t){if(!t)return f();null!==e&&e[t]&&(e[t].done=!0,e[t].callbacks&&e[t].callbacks.forEach((function(t){return!u&&t(c)})))},output:c}}(t),i=[];return new y({specific:new E(e),result:o,pending:i}),n(v,o.output),y.clear(),[].concat(i).forEach(g),o.output};return P.VERSION="7.5.1",P.enforce=u,P.draft=function(){var t=l().ctx;if(t)return t.result.output;setTimeout((function(){throw new Error("[Passable]: Draft was called outside of the context of a running suite. Please make sure you call it only from your Passable suite.")}))},P.Enforce=u.Enforce,P.test=v,P.validate=function(n){if("function"!=typeof n&&!(n instanceof Promise))throw new TypeError("[Validate]: expected ".concat(t(n)," to be a function."));try{return!1!==n()}catch(t){return!1}},P.any=a,P.WARN="warn",P.FAIL="fail",p(P),P}));
//# sourceMappingURL=passable.min.js.map

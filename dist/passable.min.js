!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).passable=n()}(this,(function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(){return(e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function i(t,n){return t(n={exports:{}},n.exports),n.exports}var u=i((function(n,e){n.exports=function(){function n(){return(n=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e,r=arguments[n];for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t}).apply(this,arguments)}function e(t){return!!Array.isArray(t)}function r(t){return"number"==typeof t}function o(t){return"string"==typeof t}function i(t,n){return n instanceof RegExp?n.test(t):"string"==typeof n&&new RegExp(n).test(t)}function u(n,e){return!!(Array.isArray(e)&&["string","number","boolean"].includes(t(n))||"string"==typeof e&&"string"==typeof n)&&e.includes(n)}function a(t,n){return t===n}function s(t){return!(isNaN(parseFloat(t))||isNaN(Number(t))||!isFinite(t))}function f(t,n){return s(t)&&s(n)&&Number(t)===Number(n)}function c(n){return!n||(s(n)?0===n:Object.prototype.hasOwnProperty.call(n,"length")?0===n.length:"object"!=t(n)||0===Object.keys(n).length)}function l(t,n){return s(t)&&s(n)&&Number(t)>Number(n)}function p(t,n){return s(t)&&s(n)&&Number(t)>=Number(n)}function y(t,n){return s(t)&&s(n)&&Number(t)<Number(n)}function h(t,n){return s(t)&&s(n)&&Number(t)<=Number(n)}function g(t,n){return t.length===n}function m(t){return!!t}function b(n,e){if("function"==typeof n){for(var r=arguments.length,o=Array(2<r?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(!0!==n.apply(void 0,[e].concat(o)))throw Error("[Enforce]: invalid "+t(e)+" value")}}function d(t){void 0===t&&(t={});var e=n({},E,{},t);if("function"==typeof w.Proxy)return function(t){var n=new Proxy(e,{get:function(e,r){if(v(e,r))return function(){for(var o=arguments.length,i=Array(o),u=0;u<o;u++)i[u]=arguments[u];return b.apply(void 0,[e[r],t].concat(i)),n}}});return n};var r=Object.keys(e);return function(t){return r.reduce((function(r,o){var i;return n(r,n({},v(e,o)&&((i={})[o]=function(){for(var n=arguments.length,i=Array(n),u=0;u<n;u++)i[u]=arguments[u];return b.apply(void 0,[e[o],t].concat(i)),r},i)))}),{})}}var v=function(t,n){return(t=Object.prototype.hasOwnProperty.call(t,n)&&"function"==typeof t[n])||function(t){setTimeout((function(){throw Error("[enforce]: "+t)}))}('Rule "'+n+'" was not found in rules object. Make sure you typed it correctly.'),t},w=Function("return this")();e.negativeForm="isNotArray",r.negativeForm="isNotNumber",o.negativeForm="isNotString",i.negativeForm="notMatches",u.negativeForm="notInside",a.negativeForm="notEquals",s.negativeForm="isNotNumeric",f.negativeForm="numberNotEquals",c.negativeForm="isNotEmpty",l.alias="gt",p.alias="gte",y.alias="lt",h.alias="lte",g.negativeForm="lengthNotEquals",m.negativeForm="isFalsy";var E=function(t){var n,e=function(n){var e=t[n].negativeForm,r=t[n].alias;e&&(t[e]=function(){return!t[n].apply(t,arguments)}),r&&(t[r]=t[n])};for(n in t)e(n);return t}({isArray:e,isNumber:r,isString:o,matches:i,inside:u,equals:a,numberEquals:f,isNumeric:s,isEmpty:c,greaterThan:l,greaterThanOrEquals:p,lessThan:y,lessThanOrEquals:h,longerThan:function(t,n){return t.length>n},longerThanOrEquals:function(t,n){return t.length>=n},shorterThan:function(t,n){return t.length<n},shorterThanOrEquals:function(t,n){return t.length<=n},lengthEquals:g,isOdd:function(t){return!!s(t)&&0!=t%2},isEven:function(t){return!!s(t)&&0==t%2},isTruthy:m}),N=new d;return N.Enforce=d,N}()})),a=i((function(t,n){var e;t.exports=(e=function(t){if("function"==typeof t)try{var n=t();return 0!=n&&Boolean(n)}catch(t){return!1}return 0!=t&&Boolean(t)},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.some(e)})})),s=Function("return this")(),f="7.6.0".split(".")[0],c=Symbol.for("PASSABLE#".concat(f)),l=function(){return s[c]},p=function(t){var n=s[c];return n?n.VERSION!==t.VERSION&&setTimeout((function(){return function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];throw new Error("[Passable]: Multiple versions of Passable detected: (".concat(n.join(),").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version."))}(t.VERSION,n.VERSION)})):s[c]=t,s[c]},y=function(t){l().ctx=this,e(this,t)};y.clear=function(){l().ctx=null};var h=function(t){return!!t&&("function"==typeof t.then||"function"==typeof t)};function g(t,n,r,o,i){e(this,{ctx:t,testFn:o,fieldName:n,statement:r,severity:i,failed:!1})}g.prototype.valueOf=function(){return!0!==this.failed},g.prototype.fail=function(){return this.ctx.result.fail(this.fieldName,this.statement,this.severity),this.failed=!0,this},g.prototype.setPending=function(){this.ctx.pending.push(this)},g.prototype.clearPending=function(){var t=this;this.ctx.pending=this.ctx.pending.filter((function(n){return n!==t}))};var m=function(t){var n=t.fieldName,e=t.testFn,r=t.statement,o=t.ctx;o.result.markAsync(n);var i=function(){t.clearPending(),b(o,n)||o.result.markAsDone(n),b(o)||o.result.markAsDone()},u=function(n){t.statement="string"==typeof n?n:r,o.pending.includes(t)&&t.fail(),i()};try{e.then(i,u)}catch(t){u()}},b=function(t,n){return!!t.pending.length&&(n?t.pending.some((function(t){return t.fieldName===n})):!!t.pending.length)},d=function(t){var n,e=t.testFn,r=t.ctx,o=t.fieldName,i=!1;r.specific.excludes(o)?r.result.addToSkipped(o):(r.result.initFieldCounters(o),r.result.bumpTestCounter(o),e&&"function"==typeof e.then?i=!0:n=function(t){var n;try{n=t.testFn()}catch(t){n=!1}return!1===n&&t.fail(),n}(t),n&&"function"==typeof n.then&&(i=!0,t.testFn=n),i&&t.setPending())},v=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i,u,a;if(h(r[0])?(u=r[0],a=r[1]):["string","object"].some((function(n){return t(r[0])===n}))&&(i=r[0],u=r[1],a=r[2]),h(u)){var s=new g(l().ctx,n,i,u,a||"fail");return d(s),s}},w=["warn","fail"],E=function(){function e(t){if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),t){if(!e.is(t))throw new TypeError;if("string"==typeof t||Array.isArray(t)){if(0===t.length)return;this.only=this.populateGroup(this.only,t)}else t.only&&(this.only=this.populateGroup(this.only,t.only)),t.not&&(this.not=this.populateGroup(this.not,t.not))}}var r,o,i;return r=e,i=[{key:"is",value:function(n){return Array.isArray(n)?n.every((function(t){return"string"==typeof t})):"string"==typeof n||!(null===n||"object"!==t(n)||!n.hasOwnProperty("only")&&!n.hasOwnProperty("not"))}}],(o=[{key:"populateGroup",value:function(t,n){return t=t||{},"string"==typeof n?t[n]=!0:Array.isArray(n)&&n.forEach((function(n){return t[n]=!0})),t}},{key:"excludes",value:function(t){return!(!this.only||this.only[t])||!(!this.not||!this.not[t])}}])&&n(r.prototype,o),i&&n(r,i),e}(),N=function(n,e,r){return"[Passable]: failed during suite initialization. Unexpected '".concat(t(e),"' for '").concat(n,"' argument.\n    See: ").concat(r||"https://fiverr.github.io/passable/getting_started/writing_tests.html")},A=function(t,n,e){if("string"!=typeof t)throw new TypeError(N("suite name",t));if("function"!=typeof n)throw new TypeError(N("tests",n));if(e&&!E.is(e))throw new TypeError(N("specific",n,"https://fiverr.github.io/passable/test/specific.html"));var o=function(t){var n=[],e=null,o=!1,i=!1,u=!1,a=function(t,n){i=!0,c.warnings[t]=c.warnings[t]||[],c.warnings[t].push(n),c.warnCount++,c.testsPerformed[t].warnCount++},s=function(t,n){o=!0,c.errors[t]=c.errors[t]||[],c.errors[t].push(n),c.failCount++,c.testsPerformed[t].failCount++},f=function(){n.forEach((function(t){return!u&&t(c)}))},c={name:t,failCount:0,warnCount:0,testCount:0,testsPerformed:{},errors:{},warnings:{},skipped:[]};return Object.defineProperties(c,{hasErrors:{value:function(t){return t?Boolean(c.getErrors(t).length):o},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(t){return t?Boolean(c.getWarnings(t).length):i},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(t){return t?c.errors[t]?c.errors[t]:[]:c.errors},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(t){return t?c.warnings[t]?c.warnings[t]:[]:c.warnings},writable:!0,configurable:!0,enumerable:!1},done:{value:function(t){return"function"!=typeof t||(e||t(c),n.push(t)),c},writable:!0,configurable:!0,enumerable:!1},after:{value:function(t,n){return"function"!=typeof n||(!(e=e||{})[t]&&c.testsPerformed[t]?n(c):e[t]&&(e[t].callbacks=[].concat(r(e[t].callbacks||[]),[n]))),c},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){return u=!0,c},writable:!0,configurable:!0,enumerable:!1}}),{initFieldCounters:function(t){if(c.testsPerformed[t])return c;c.testsPerformed[t]={testCount:0,failCount:0,warnCount:0}},bumpTestError:s,bumpTestWarning:a,bumpTestCounter:function(t){if(!c.testsPerformed[t])return c;c.testsPerformed[t].testCount++,c.testCount++},fail:function(t,n,e){if(!c.testsPerformed[t])return c;"warn"===(e&&w.includes(e)?e:"fail")?a(t,n):s(t,n)},addToSkipped:function(t){!c.skipped.includes(t)&&c.skipped.push(t)},runCompletionCallbacks:f,markAsync:function(t){(e=e||{})[t]=e[t]||{},e[t]={done:!1,callbacks:e[t].callbacks||[]}},markAsDone:function(t){if(!t)return f();null!==e&&e[t]&&(e[t].done=!0,e[t].callbacks&&e[t].callbacks.forEach((function(t){return!u&&t(c)})))},output:c}}(t),i=[];return new y({specific:new E(e),result:o,pending:i}),n(v,o.output),y.clear(),[].concat(i).forEach(m),o.output};return A.VERSION="7.6.0",A.enforce=u,A.draft=function(){var t=l().ctx;if(t)return t.result.output;setTimeout((function(){throw new Error("[Passable]: Draft was called outside of the context of a running suite. Please make sure you call it only from your Passable suite.")}))},A.Enforce=u.Enforce,A.test=v,A.validate=function(n){if("function"!=typeof n&&!(n instanceof Promise))throw new TypeError("[Validate]: expected ".concat(t(n)," to be a function."));try{return!1!==n()}catch(t){return!1}},A.any=a,A.WARN="warn",A.FAIL="fail",p(A),A}));
//# sourceMappingURL=passable.min.js.map

!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).passable=t()}(this,(function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function e(){return(e=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function r(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function o(n,t){return n(t={exports:{}},t.exports),t.exports}var i=o((function(t,r){t.exports=function(){function t(e){return(t="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(e)}function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function o(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function i(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?o(e,!0).forEach((function(t){r(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):o(e).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var u=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)&&"function"==typeof n[t]},a=Function("return this")(),s=function(){return"function"==typeof a.Proxy};function f(n){return Boolean(Array.isArray(n))}function c(n){return Boolean("number"==typeof n)}function l(n){return Boolean("string"==typeof n)}function p(n,t){return t instanceof RegExp?t.test(n):"string"==typeof t&&new RegExp(t).test(n)}function y(n,e){return Array.isArray(e)&&["string","number","boolean"].includes(t(n))?e.includes(n):"string"==typeof e&&"string"==typeof n&&e.includes(n)}function h(n,t){return n===t}function g(n){var t=!isNaN(parseFloat(n))&&!isNaN(Number(n))&&isFinite(n);return Boolean(t)}function b(n,t){return g(n)&&g(t)&&Number(n)===Number(t)}function m(n){return!n||(g(n)?0===n:Object.prototype.hasOwnProperty.call(n,"length")?0===n.length:"object"!==t(n)||0===Object.keys(n).length)}function d(n,t){return g(n)&&g(t)&&Number(n)>Number(t)}function v(n,t){return g(n)&&g(t)&&Number(n)>=Number(t)}function w(n,t){return g(n)&&g(t)&&Number(n)<Number(t)}function E(n,t){return g(n)&&g(t)&&Number(n)<=Number(t)}function O(n,t){return n.length===t}f.negativeForm="isNotArray",c.negativeForm="isNotNumber",l.negativeForm="isNotString",p.negativeForm="notMatches",y.negativeForm="notInside",h.negativeForm="notEquals",g.negativeForm="isNotNumeric",b.negativeForm="numberNotEquals",m.negativeForm="isNotEmpty",d.alias="gt",v.alias="gte",w.alias="lt",E.alias="lte",O.negativeForm="lengthNotEquals";var P=function(n){var t=function(t){var e=n[t].negativeForm,r=n[t].alias;e&&(n[e]=function(){return!n[t].apply(n,arguments)}),r&&(n[r]=n[t])};for(var e in n)t(e);return n}({isArray:f,isNumber:c,isString:l,matches:p,inside:y,equals:h,numberEquals:b,isNumeric:g,isEmpty:m,greaterThan:d,greaterThanOrEquals:v,lessThan:w,lessThanOrEquals:E,longerThan:function(n,t){return n.length>t},longerThanOrEquals:function(n,t){return n.length>=t},shorterThan:function(n,t){return n.length<t},shorterThanOrEquals:function(n,t){return n.length<=t},lengthEquals:O,isOdd:function(n){return!!g(n)&&n%2!=0},isEven:function(n){return!!g(n)&&n%2==0}});function N(n,e){if("function"==typeof n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];if(!0!==n.apply(void 0,[e].concat(o)))throw new Error("[Enforce]: invalid ".concat(t(e)," value"))}}function A(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i({},P,{},n);if(s())return function(n){var e=new Proxy(t,{get:function(t,r){if(u(t,r))return function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return N.apply(void 0,[t[r],n].concat(i)),e}}});return e};var o=Object.keys(t);return function(n){return o.reduce((function(o,a){return e(o,i({},u(t,a)&&r({},a,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return N.apply(void 0,[t[a],n].concat(r)),o}))))}),{})}}var x=new A;return x.Enforce=A,x}()})),u=o((function(n,t){var e;n.exports=(e=function(n){if("function"==typeof n)try{var t=n();return 0!=t&&Boolean(t)}catch(n){return!1}return 0!=n&&Boolean(n)},function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return t.some(e)})})),a=Function("return this")(),s="7.6.0-rc".split(".")[0],f=Symbol.for("PASSABLE#".concat(s)),c=function(){return a[f]},l=function(n){var t=a[f];return t?t.VERSION!==n.VERSION&&setTimeout((function(){return function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];throw new Error("[Passable]: Multiple versions of Passable detected: (".concat(t.join(),").\n    Most features should work regularly, but for optimal feature compatibility, you should have all running instances use the same version."))}(n.VERSION,t.VERSION)})):a[f]=n,a[f]},p=function(n){c().ctx=this,e(this,n)};p.clear=function(){c().ctx=null};var y=function(n){return!!n&&("function"==typeof n.then||"function"==typeof n)};function h(n,t,r,o,i){e(this,{ctx:n,testFn:o,fieldName:t,statement:r,severity:i,failed:!1})}h.prototype.valueOf=function(){return!0!==this.failed},h.prototype.fail=function(){return this.ctx.result.fail(this.fieldName,this.statement,this.severity),this.failed=!0,this},h.prototype.setPending=function(){this.ctx.pending.push(this)},h.prototype.clearPending=function(){var n=this;this.ctx.pending=this.ctx.pending.filter((function(t){return t!==n}))};var g=function(n){var t=n.fieldName,e=n.testFn,r=n.statement,o=n.ctx;o.result.markAsync(t);var i=function(){n.clearPending(),b(o,t)||o.result.markAsDone(t),b(o)||o.result.markAsDone()},u=function(t){n.statement="string"==typeof t?t:r,o.pending.includes(n)&&n.fail(),i()};try{e.then(i,u)}catch(n){u()}},b=function(n,t){return!!n.pending.length&&(t?n.pending.some((function(n){return n.fieldName===t})):!!n.pending.length)},m=function(n){var t,e=n.testFn,r=n.ctx,o=n.fieldName,i=!1;r.specific.excludes(o)?r.result.addToSkipped(o):(r.result.initFieldCounters(o),r.result.bumpTestCounter(o),e&&"function"==typeof e.then?i=!0:t=function(n){var t;try{t=n.testFn()}catch(n){t=!1}return!1===t&&n.fail(),t}(n),t&&"function"==typeof t.then&&(i=!0,n.testFn=t),i&&n.setPending())},d=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i,u,a;if(y(r[0])?(u=r[0],a=r[1]):["string","object"].some((function(t){return n(r[0])===t}))&&(i=r[0],u=r[1],a=r[2]),y(u)){var s=new h(c().ctx,t,i,u,a||"fail");return m(s),s}},v=["warn","fail"],w=function(){function e(n){if(function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n){if(!e.is(n))throw new TypeError;if("string"==typeof n||Array.isArray(n)){if(0===n.length)return;this.only=this.populateGroup(this.only,n)}else n.only&&(this.only=this.populateGroup(this.only,n.only)),n.not&&(this.not=this.populateGroup(this.not,n.not))}}var r,o,i;return r=e,i=[{key:"is",value:function(t){return Array.isArray(t)?t.every((function(n){return"string"==typeof n})):"string"==typeof t||!(null===t||"object"!==n(t)||!t.hasOwnProperty("only")&&!t.hasOwnProperty("not"))}}],(o=[{key:"populateGroup",value:function(n,t){return n=n||{},"string"==typeof t?n[t]=!0:Array.isArray(t)&&t.forEach((function(t){return n[t]=!0})),n}},{key:"excludes",value:function(n){return!(!this.only||this.only[n])||!(!this.not||!this.not[n])}}])&&t(r.prototype,o),i&&t(r,i),e}(),E=function(t,e,r){return"[Passable]: failed during suite initialization. Unexpected '".concat(n(e),"' for '").concat(t,"' argument.\n    See: ").concat(r||"https://fiverr.github.io/passable/getting_started/writing_tests.html")},O=function(n,t,e){if("string"!=typeof n)throw new TypeError(E("suite name",n));if("function"!=typeof t)throw new TypeError(E("tests",t));if(e&&!w.is(e))throw new TypeError(E("specific",t,"https://fiverr.github.io/passable/test/specific.html"));var o=function(n){var t=[],e=null,o=!1,i=!1,u=!1,a=function(n,t){i=!0,c.warnings[n]=c.warnings[n]||[],c.warnings[n].push(t),c.warnCount++,c.testsPerformed[n].warnCount++},s=function(n,t){o=!0,c.errors[n]=c.errors[n]||[],c.errors[n].push(t),c.failCount++,c.testsPerformed[n].failCount++},f=function(){t.forEach((function(n){return!u&&n(c)}))},c={name:n,failCount:0,warnCount:0,testCount:0,testsPerformed:{},errors:{},warnings:{},skipped:[]};return Object.defineProperties(c,{hasErrors:{value:function(n){return n?Boolean(c.getErrors(n).length):o},writable:!0,configurable:!0,enumerable:!1},hasWarnings:{value:function(n){return n?Boolean(c.getWarnings(n).length):i},writable:!0,configurable:!0,enumerable:!1},getErrors:{value:function(n){return n?c.errors[n]?c.errors[n]:[]:c.errors},writable:!0,configurable:!0,enumerable:!1},getWarnings:{value:function(n){return n?c.warnings[n]?c.warnings[n]:[]:c.warnings},writable:!0,configurable:!0,enumerable:!1},done:{value:function(n){return"function"!=typeof n?c:(e||n(c),t.push(n),c)},writable:!0,configurable:!0,enumerable:!1},after:{value:function(n,t){return"function"!=typeof t?c:(!(e=e||{})[n]&&c.testsPerformed[n]?t(c):e[n]&&(e[n].callbacks=[].concat(r(e[n].callbacks||[]),[t])),c)},writable:!0,configurable:!0,enumerable:!1},cancel:{value:function(){return u=!0,c},writable:!0,configurable:!0,enumerable:!1}}),{initFieldCounters:function(n){if(c.testsPerformed[n])return c;c.testsPerformed[n]={testCount:0,failCount:0,warnCount:0}},bumpTestError:s,bumpTestWarning:a,bumpTestCounter:function(n){if(!c.testsPerformed[n])return c;c.testsPerformed[n].testCount++,c.testCount++},fail:function(n,t,e){if(!c.testsPerformed[n])return c;"warn"===(e&&v.includes(e)?e:"fail")?a(n,t):s(n,t)},addToSkipped:function(n){!c.skipped.includes(n)&&c.skipped.push(n)},runCompletionCallbacks:f,markAsync:function(n){(e=e||{})[n]=e[n]||{},e[n]={done:!1,callbacks:e[n].callbacks||[]}},markAsDone:function(n){if(!n)return f();null!==e&&e[n]&&(e[n].done=!0,e[n].callbacks&&e[n].callbacks.forEach((function(n){return!u&&n(c)})))},output:c}}(n),i=[];return new p({specific:new w(e),result:o,pending:i}),t(d,o.output),p.clear(),[].concat(i).forEach(g),o.output};return O.VERSION="7.6.0-rc",O.enforce=i,O.draft=function(){var n=c().ctx;if(n)return n.result.output;setTimeout((function(){throw new Error("[Passable]: Draft was called outside of the context of a running suite. Please make sure you call it only from your Passable suite.")}))},O.Enforce=i.Enforce,O.test=d,O.validate=function(t){if("function"!=typeof t&&!(t instanceof Promise))throw new TypeError("[Validate]: expected ".concat(n(t)," to be a function."));try{return!1!==t()}catch(n){return!1}},O.any=u,O.WARN="warn",O.FAIL="fail",l(O),O}));
//# sourceMappingURL=passable.min.js.map
